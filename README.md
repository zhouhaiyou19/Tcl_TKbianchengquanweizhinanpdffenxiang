# Tcl_TK编程权威指南pdf

## 内容简介

《Tcl_TK编程权威指南pdf》是一本全面介绍Tcl/Tk编程的权威指南。Tcl/Tk是一种跨平台的脚本语言，能够在Windows、Macintosh和Solaris等主要平台上处理企业级任务。本书共分为55章，详细讲解了Tcl基础、Tcl高级特性、Tk基础、Tk组件、Tk详解、C语言编程、各版本之间的差异等方面的知识。通过大量实例，生动翔实地向读者介绍了Tcl/Tk编程，是掌握Tcl/Tk的必备参考书。

## 目录

### 第1部分 Tcl基础

1. Tcl的基本知识
2. 开始使用
3. CGI应用程序--顾客留言簿
4. Tcl中的字符串处理
5. Tcl列表
6. 控制结构命令
7. 过程与作用域
8. Tcl数组
9. 对文件和程序的操作

### 第2部分 Tcl高级特性

10. 引用问题与eval
11. 正则表达式
12. 脚本库及软件包
13. 反射与调试
14. 名字空间
15. 国际化(internationalization)
16. 事件驱动的编程
17. 套接字编程
18. Tclhttpd Web服务器
19. 多解释器与Safe-Tcl
20. Safe-Tk与浏览器插件

### 第3部分 Tk基础

21. Tk的基本知识
22. Tk实例解析
23. 打包摆放布局管理器（pack）
24. 栅格摆放布局管理器（grid）
25. 定位摆放布局管理器（place）
26. 将命令与事件编联

### 第4部分 Tk组件

27. 按钮与菜单
28. 资源数据库
29. 简单的Tk组件
30. 滚动条
31. 输入条组件
32. 列表框组件
33. 文本组件
34. 画布组件

### 第5部分 Tk详解

35. 选择和剪贴板
36. 焦点、焦点的捕获和对话框
37. Tk组件的属性
38. 颜色、图片和鼠标指针
39. 字体与文本属性
40. Send
41. 窗口管理器与窗口信息
42. 管理用户首选项
43. 一种操作编联的用户界面

### 第6部分 C语言编程

44. C语言编程与Tcl
45. 编译Tcl及扩展模块
46. 使用C语言编写Tk组件
47. C函数库概览

### 第7部分 各版本之间的差异

48. Tcl 7.4/Tk 4.0
49. Tcl 7.5/Tk 4.1
50. Tcl 7.6/Tk 4.2
51. Tcl/Tk 8.0
52. Tcl/Tk 8.1
53. Tcl/Tk 8.2
54. Tcl/Tk 8.3
55. 有关本书的CD-ROM

## 序言

Tcl为工具命令语言(Tool Command Language)的缩写。它其实是指两样东西：一种脚本语言，以及该脚本语言的解释器。该解释器可以很容易地嵌入到你的应用程序中。Tcl和与之关联的图形用户界面工具包(Tk)是由加州大学的John Ousterhout教授设计并编写的。尽管它是个商用软件包，但你也可以在Internet上找到它，而且可以在自己的应用程序中自由使用这个软件包。Tcl解释器已经从Unix平台移植到了DOS、Windows、OS/2、NT以及Macintosh环境中，而TK工具包也从X window系统移植到了Windows和Macintosh环境中。

1988年，当我在Berkeley做Ousterhout教授的博士生时，第一次听说了Tcl。我们当时正在设计一种名为Sprite的网络操作系统。同学们在努力编制一个新式的内核程序，而John编写了一个新的编辑器和终端仿真程序。他使用Tcl作为这两种工具的命令语言，这样用户就可以定义菜单或者对那些程序进行定制。那时还处在使用X10的时代，他计划编写一个基于Tcl的X工具包，以使程序之间通过Tcl命令进行通信，彼此相互协作。对我来说，这种工具之间的相互协作就是Tcl的实质。

这种早期的设想就是让应用程序由包含编译代码的大块实体和一小部分用于进行配置和编写高级命令的Tcl代码组成。John的编辑器VI，还有终端仿真程序tx就遵循了这种模式。虽然这种模式仍然是有效的，但结果表明用Tcl来编写整个应用程序也是可能的。这是因为Tcl/Tk的shell程序wish提供了对其他程序、文件系统和网络套接字的存取功能，同时还能够创建图形用户界面。不管怎样，现在发现包含几千行Tcl脚本的应用程序并不稀奇。

我编写这本书的原因就是，虽然自己觉得使用Tcl与Tk既有乐趣又高效，但是也有令人头痛的时候。此外，在Xerox PARC工作，那里有许多语言和系统上的专家，我不得不强迫自己去理解Tcl/Tk的长处和弱点。我的许多同事都在他们的项目中采用了Tcl和Tk，但是他们也很快指出了它的缺点。因此，我就总结了一套编程技巧以充分利用Tcl/Tk的强大功能，同时回避一些棘手的问题。这本书就是一本帮助你最大限度地利用Tcl/Tk并回避一些我所经历过的令人头痛的问题的实用编程指南。

我接触Tcl语言大概已经有10年的时间了，而本书的第一版也已经出版5年了。在过去的几年中，我一直在John Ousterhout的手下工作，最初是在Sun微系统公司，而现在是在Scriptics公司。我一直使自己在很大程度上保持着一个Tcl程序员的角色，而我们工作组中的其他人员则埋头于Tcl本身的C语言实现。我创建的应用程序有HTML编辑器、EMAIL用户接口程序、Web服务器以及用户数据库，我们的商务应用就建立在它们的基础上。这些经历在本书中有所反映。本书的大部分内容是有关Tcl脚本编程的，而有关使用C语言来创建Tcl扩展模块的内容没有着重讲述。我有幸一直参与Tcl核心技术的开发活动，希望通过本书能够将自己使用Tcl时获得的切身体会表达出来。

## 为什么要使用Tcl

作为一种脚本语言，Tcl与其他的Unix shell语言，如Bourne Shell(sh)、C Shell(csh)、Korn Shell以及Perl类似。Shell程序可以让你执行其他的程序。它们提供了足够的可编程特性(变量、流程控制和过程)，使你可以将现有程序组装成符合自己需要的复杂的脚本程序。Shell程序非常适用于一些日常任务的自动化处理工作。

Tcl解释器可以很容易地添加到你的应用程序中，这种能力将它与其他的shell语言区分开来。Tcl扮演了一种扩展语言的角色，用来配置和定制应用程序。你没有必要再去为自己的新应用程序发明一种命令语言，或是费力为自己的工具提供某种用户可编程特性。其实，你可以通过添加一个Tcl解释器，来将自己的应用程序组织成一组操作原语，并使用这些原语来构造最符合用户需求的脚本程序。这样还可以允许其他的程序通过编程来控制你的应用程序，以使套装应用程序能够很好地在一起工作。

Tcl的C函数库拥有清晰的接口而且便于使用。该函数库实现了基本的解释器，它有一套实现变量、流程控制和过程的核心脚本命令，而且还有一组用来存取操作系统服务以运行其他程序、存取文件系统和使用网络套接字的命令。Tcl和Tk提供了一台可以在UNIX、Windows和Macintosh环境中可移植的虚拟机。

因为你的应用程序可以定义新的Tcl命令，所以Tcl虚拟机是可扩展的。这些命令与你的应用程序所提供的C或C++过程关联。结果应用程序就分割成一组用编译语言编写的原语，并输出成为相应的Tcl命令。使用Tcl脚本程序可以将这些原语组装成完整的应用程序。脚本语言层可以存取与shell类似的功能以运行其他的程序，可以存取文件系统，还可以直接通过自己定义的Tcl命令来调用应用程序中编译的代码部分。此外，从C编程的层面上来说，你还可以调用Tcl脚本程序、设置和询问Tcl变量，甚至跟踪Tcl解释器的执行。

在Internet上有许多可自由使用的Tcl扩展模块。许多扩展模块都包含了一个提供某种新功能的C函数库，以及该函数库的Tcl接口。这样的例子包括数据库存取、电话控制、MIDI控制器存取，还有expect，它为控制交互式程序增加了一组Tcl命令。

最为著名的扩展模块就是Tk，这是一种图形用户界面工具包。Tk定义了用来创建和操作用户界面组件的Tcl命令。这种基于脚本的用户界面编程方法有三个好处：

- 由于快速的响应周期，所以开发迅速，不存在漫长的编译等待过程。
- Tcl命令提供了一种比绝大多数由标准C函数库实现的用户界面工具包更为高级的接口。它只需一小组命令就可以定义简单的用户界面，同时又可以对用户界面进行细化以恰当地实现每一个细节。快速的响应周期又为这种细化过程提供了帮助。
- 用户界面处理可以从你的应用程序的其余部分分离出来。因而开发人员能够专心致志地实现应用程序的核心部分，然后再颇为轻松地构建出用户界面。Tk组件的核心功能通常能够满足你所有的用户界面需求。不过，你还可以用C语言来编写定制的Tk组件，而且网上还有许多大家提供的Tk组件可以使用。

还有其他可以用做扩展语言的选择，这包括VisualBasic、Scheme、Elisp、Perl、Python和Javascript等，你可以依照个人喜好从中进行选择。Tcl拥有简单的结构，而且还有些地方类似于C语言，可以通过编制C过程来增添新的Tcl原语。Tcl非常易学，许多有关用户使用Tcl在很短的时间内(例如几个星期)就完成了相当难度的项目，并且他们以前压根就没有接触过Tcl。

当本书第一次出版时，Java轰动了计算机界。Java是一种极为优秀的系统编程语言，长远来看还有可能代替C和C++语言。这对Tcl来说挺好，它在设计时就被用来将由任意系统编程语言编写的构件粘连起来。Tcl过去被设计与C语言一起工作，但是现在已经被改造成能够与Java虚拟机一起工作。在我们提到C或C++的地方，现在也可以说C、C++或Java了，但是对于Java来说，其细节上还多少存在些差异。这本书并没有描述Tcl/Java接口，但是你可以在CD-ROM上找到TclBlend。TclBlend将Java虚拟机加载到你的Tcl应用程序中并允许你调用Java方法，它还可以让你使用Java而不是C或C++来实现Tcl命令。

Javascript是一种来自于Netscape的语言，它被设计用来编写与Web页面进行交互的脚本程序。由于Netscape的广泛使用，Javascript就显得很重要，然而Tcl提供了一种更为通用的脚本方案，可以在更为广泛的范围中使用。Tcl/Tk的Web浏览器插件提供了一种在浏览器中运行Tcl的方式，结果使得Tcl更像是一种Java的替代品而不是Javascript的替代品。该插件可以让你在浏览器中执行Tcl应用程序，而Javascript则为你提供了对浏览器和HTML显示的精细控制。这种插件将在第20章有所描述。

## Tcl与Tk的版本

Tcl与Tk仍在继续演变。请参看http：／／www.beedub.com／book/来了解有关最新的Tcl版本的更新和消息。由于历史原因，Tcl与Tk曾各有各的版本号，但是它们成对发行，并一起工作。这本书的原始版本基于Tcl7．4和Tk 4.0并有几处引用了Tk 3．6的功能。第三版已经进行了更新，它反映了直到Tcl/Tk8．2以来所增添的各种新特性：

- Tcl7．5和Tk 4.1的最终发布在1996年5月。这些版本的特点是将Tk移植到了Windows和Macintosh环境。它引入了Safe-Tcl安全机制，以支持网络小应用程序(Applet)的安全执行。它还提供了对网络套接字的支持以及一种新的输入输出(I/O)子系统，以支持高性能的事件驱动I/O。
- Tcl7．6和Tk4．2的最终发布是在1996年的10月。这些版本包含了对Safe-Tcl的改进，以及对在Tk 4．1中引进的grid布局管理器的改进。跨平台的支持包括虚拟事件(例如，以＜＜Copy＞＞来代表＜Control-c＞)、标准对话框，还有更多的文件操作命令。
- Tcl 7.7和Tk 4．3是内部版本，用于开发NetscapeNavigator和MicrosoftInternetExplorer Web浏览器的Tcl/Tk插件。它们的开发工作实际上与Tcl7．6和Tk 4．2并行进行。Tcl/Tk插件已经发布了许多各种平台上的版本，其中包括Solaris／SPARC、Solaris/INTEL、SunOS、Linux、Digital UNIX、IRIX、HP／UX、Windows95、Windows NT以及Macintosh。该浏览器插件支持Web页面中的Tcl小应用程序(Applet)，同时使用Safe-Tcl复杂的安全机制来提供安全保证。
- Tcl8．0为Tcl新增了一个运行时用的编译器，这个编译器提供了数倍于Tcl脚本的执行速度。Tcl8.0支持内嵌空字符的字符串。编译器对脚本来说是透明的，但是扩展模块编写人员需要学习一些新的C API才能发挥它的潜力。由于John Ousterhout从Sun微系统公司到了Scriptics公司，发布8．0版的时间推迟了几年。广泛使用的版本8．0p2是在1997年完成的，但是最终的补丁版本8.0.5直到1999年春才发布。
- 在8．0时，Tk更改了版本号以与Tcl相匹配。Tk 8．0包含了一种新的独立于平台的字体机制，它还包含了本地化菜单和菜单条，以及更多的本地化组件，它们在Windows和Macintosh上拥有更好的本地化外观。
- Tcl/Tk8．1新特性主要包括对Unicode的完整支持，以及线程安全，这样你就可以将Tcl嵌入到多线程的应用程序中。Unicode是一种新的正则表达式引擎，它提供了在Perl5中所能找到的所有功能。Tk为找到正确的用于显示Unicode字符的字体完成了卓越的工作，它还增加了一种信息目录设施，这样你就可以编写国际化的应用程序。Tcl/Tk 8．1的发布史中还包括了Sun到Scriptics的过渡。第一个alpha版本完成于1997年秋，而最终的补丁版本完成于1999年5月。
- Tcl/Tk 8．2主要是一个进行bug修正和稳固化的版本。它对TclC函数库API进行了几处微小增补，这样无须核心补丁程序也能支持更多的扩展模块。Tcl/Tk 8．2很快在1999年夏进入最终版本。

## 谁应当阅读本书

本书不仅适用于熟练的编程人员，同样也适用于初学者。对于初学者和熟练编程人员来说，我建议大家仔细学习一下第1章Tcl的基本知识。Tcl的编程模型被设计成一种简单的模式，它与许多编程语言存在差异。该模型基于字符串替换，你对这一点的正确理解很重要，这样才能避免在复杂情况下遇到麻烦。这本书的其余部分则包含了演示如何高效地使用Tcl与Tk的例子。每一章中都有对其中所描述的Tcl命令和Tk组件进行总结的表格，以供参考。

本书假定你有一些编程经验，但是你如果是个彻头彻尾的新手也能够读下去。对Unix shell的了解将会对你有所帮助，但这并不是必须的。在那些涉及Windows系统的地方，我会提供一些背景信息。第2章详细描述了在UNIX、Windows和Macintosh上使用Tcl与Tk的内容。

## 如何阅读本书

本书最好能在上机实习中使用，可以在计算机上尝试一下书中的例子。Tcl与Tk的命令手册尽管完整但却缺少上下文的相关信息和例子，本书就试图填补在简明手册与现有的文档化或没有很好文档化的Tcl程序之间的空隙。

我推荐使用联机手册来查阅有关的Tcl/Tk命令。它为每个命令都提供了详细的参考指南，但是它没能提供完整的细节，这在每一次发布的版本中都有所不同。HTML版本的联机手册可以在随书的CD-ROM中找到。

## 下载链接
[Tcl_TK编程权威指南pdf分享](https://pan.quark.cn/s/79eb8bdeadfc) 

(备用: [备用下载](https://pan.baidu.com/s/1Ut3Epj77Kw6dnMcU4aPaeA?pwd=1234))

## 说明

该仓库仅用于学习交流，请勿用于商业用途。
